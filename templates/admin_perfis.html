{% extends "base.html" %}
{% block title %}Admin â€¢ Profili Utenti | FlashPoint{% endblock %}

{% block content %}

<style>
/* ===== HEADER ===== */
.page-header {
    text-align: center;
    margin-top: 20px;
}
.page-header h4 {
    font-weight: 700;
}
.page-header p {
    color: #6c757d;
    margin-bottom: 0;
}

/* ===== CARD PADRAO ===== */
.card-box {
    background: #fff;
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    margin-bottom: 20px;
}

/* ===== LISTA MOBILE ===== */
.usuarios-cards {
    display: grid;
    gap: 14px;
    padding-bottom: 18px;
}

.usuario-card {
    background: #fff;
    border-radius: 14px;
    padding: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    border-left: 4px solid #041955;
}

.usuario-nome {
    font-weight: 700;
    color: #041955;
    margin-bottom: 4px;
}

.usuario-meta {
    font-size: 13px;
    color: #6c757d;
}

.badge-tipo {
    font-size: 11px;
    font-weight: 700;
    padding: 3px 10px;
    border-radius: 14px;
    display: inline-block;
    background: #e9ecef;
    color: #343a40;
}
.badge-admin {
    background: #e6f0ff;
    color: #0b5ed7;
}

/* ===== DESKTOP ===== */
.table-desktop {
    display: none;
}

@media (min-width: 768px) {
    .usuarios-cards {
        display: none;
    }
    .table-desktop {
        display: block;
    }
}
</style>

<!-- HEADER -->
<div class="page-header">
    <h4 class="text-dark">
        <i class="fa fa-user-pen me-2"></i>Gestione profili utenti
    </h4>
    <p>Solo gli amministratori possono modificare i profili</p>
</div>

<hr class="my-4">

{% if usuarios %}

<!-- ===== MOBILE ===== -->
<div class="usuarios-cards">
    {% for u in usuarios %}
    <div class="usuario-card">
        <div class="usuario-nome">
            <i class="fa fa-user me-1"></i>{{ u.nome }} {{ u.sobrenome }}
        </div>
        <div class="usuario-meta">{{ u.email or "email non disponibile" }}</div>
        <div class="d-flex align-items-center gap-2 mt-2">
            <span class="badge-tipo {% if u.tipo == 'admin' %}badge-admin{% endif %}">
                {{ "Admin" if u.tipo == "admin" else "Utente" }}
            </span>
        </div>
        <div class="mt-3 d-grid">
            <a href="{{ url_for('admin_perfil_editar', uid=u.uid) }}" class="btn btn-primary">
                <i class="fa fa-edit me-1"></i> Modifica profilo
            </a>
        </div>
    </div>
    {% endfor %}
</div>

<!-- ===== DESKTOP ===== -->
<div class="table-desktop">
    <table class="table align-middle">
        <thead>
            <tr>
                <th>Utente</th>
                <th>Email</th>
                <th>Ruolo</th>
                <th class="text-center">Azione</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            {% for u in usuarios %}
            <tr>
                <td class="fw-bold">{{ u.nome }} {{ u.sobrenome }}</td>
                <td>{{ u.email or "-" }}</td>
                <td>
                    <span class="badge-tipo {% if u.tipo == 'admin' %}badge-admin{% endif %}">
                        {{ "Admin" if u.tipo == "admin" else "Utente" }}
                    </span>
                </td>
                <td class="text-center">
                    <a href="{{ url_for('admin_perfil_editar', uid=u.uid) }}"
                       class="btn btn-sm btn-primary">
                        <i class="fa fa-edit"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% else %}
<p class="text-muted text-center mt-4">
    Nessun utente registrato.
</p>
{% endif %}

{% endblock %}
